package hr.tom.lab.entity;

import org.springframework.context.MessageSource;
import org.springframework.context.i18n.LocaleContextHolder;
import org.springframework.ui.Model;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

/**
 * Class with static methods to define message on pages.
 * 
 * @author Tom.K
 *
 */
public class MessageConfig {
	
	/**
	 * Defines a message on page.
	 * 
	 * @param model
	 *            Template model.
	 * @param messageSource
	 *            Contains resource strings.
	 * @param messageKey
	 *            Key of resource string.
	 * @param messageArgs
	 *            Arguments of resource string, if they exist.
	 * @param type
	 *            Type of message.
	 */
	public static void setMessage(Model model, MessageSource messageSource, String messageKey, Object[] messageArgs,
			MessageType type) {
		model.addAttribute("message_type", type.getName());
		model.addAttribute("message",
				messageSource.getMessage(messageKey, messageArgs, LocaleContextHolder.getLocale()));
	}

	/**
	 * Defines a message on page.
	 * 
	 * @param model
	 *            Template model.
	 * @param messageSource
	 *            Contains resource strings.
	 * @param messageKey
	 *            Key of resource string.
	 * @param type
	 *            Type of message.
	 */
	public static void setMessage(Model model, MessageSource messageSource, String messageKey, MessageType type) {
		setMessage(model, messageSource, messageKey, null, type);
	}

	/**
	 * Defines a message on redirected page.
	 * 
	 * @param redirectAttributes
	 *            Template model.
	 * @param messageSource
	 *            Attributes to be applied on redirect page.
	 * @param messageKey
	 *            Key of resource string.
	 * @param messageArgs
	 *            Arguments of resource string, if they exist.
	 * @param type
	 *            Type of message.
	 */
	public static void setMessage(RedirectAttributes redirectAttributes, MessageSource messageSource, String messageKey,
			Object[] messageArgs, MessageType type) {
		redirectAttributes.addFlashAttribute("message_type", type.getName());
		redirectAttributes.addFlashAttribute("message",
				messageSource.getMessage(messageKey, messageArgs, LocaleContextHolder.getLocale()));
	}

	/**
	 * Defines a message on redirected page.
	 * 
	 * @param redirectAttributes
	 *            Template model.
	 * @param messageSource
	 *            Attributes to be applied on redirect page.
	 * @param messageKey
	 *            Key of resource string.
	 * @param type
	 *            Type of message.
	 */
	public static void setMessage(RedirectAttributes redirectAttributes, MessageSource messageSource, String messageKey,
			MessageType type) {
		setMessage(redirectAttributes, messageSource, messageKey, null, type);
	}
}
